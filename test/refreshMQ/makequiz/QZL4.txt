/**
 * A panel which lists all the existing quiz names.  Each individual
 * quiz can be selected for editing.  New quizes can be added, and
 * existing quizes can be deleted, by means of a context menu.
 */
public class QuizList extends JPanel {
   // A border around the list of quiz names
   static Border quizListBorder = BorderFactory.createCompoundBorder
      (BorderFactory.createEmptyBorder(5, 5, 0, 5), BorderFactory.createTitledBorder("Quizes"));

   border = quizListBorder;
   Insets panelInsets := insets;

   // State shared by all the panels
   QuizDataManager dataManager;
   MakeQuizState state;

   // A popup menu with menu items to add a new quiz and delete an
   // existing quiz
   object quizPopupMenu extends JPopupMenu implements ActionListener {
      object addQuizMenuItem extends JMenuItem {
	 text = "Add quiz";
	 { addActionListener(quizPopupMenu); }
      }
      object deleteQuizMenuItem extends JMenuItem {
	 text := "Delete quiz " + state.quizName;
	 visible := (state.quizName != null);
	 { addActionListener(quizPopupMenu); }
      }

      void actionPerformed(ActionEvent event) {
	 JMenuItem menuItem = (JMenuItem) event.source;
      }
   }

   // Listens for mouse events and brings up the popup menu when
   // necessary
   object popupListener extends PopupMenuListener {
      popupMenu = quizPopupMenu;
   }

   // A scroll pane with a list of all quiz names
   object quizListPane extends JScrollPane {
      location := SwingUtil.point(panelInsets.left, panelInsets.top);
      size := SwingUtil.subInsets(QuizList.this.size, panelInsets);
      viewportView = quizNameList;

      object quizNameList extends JList {
	 listItems := dataManager.getAllQuizNames();
	 selectionMode = ListSelectionModel.SINGLE_SELECTION;
	 selectedValue :=: (String) state.quizName;
	 { addMouseListener(popupListener); }
      }
   }
}
