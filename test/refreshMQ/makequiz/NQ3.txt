/**
 * Implements a dialog which lets you name a new quiz to be added, and
 * creates the quiz in the database.
 */
public class NameQuiz implements PropertyChangeListener {
   QuizDataManager dataManager;
   String quizName;

   object quizNameField extends JTextField {
      text :=: quizName;
   }

   object optionPane extends JOptionPane {
      message = new Object[] { "Name your quiz:", quizNameField };
      messageType = PLAIN_MESSAGE;
      optionType = OK_CANCEL_OPTION;
      { addPropertyChangeListener(NameQuiz.this); }
   }

   object quizNameDialog extends JDialog {
      title = "Name Your Quiz";
      modal = true;
      resizable = false;
      contentPane = optionPane;
      defaultCloseOperation = DO_NOTHING_ON_CLOSE;
   }

   /**
    * Validates the quiz name supplied by the user when the dialog is
    * submitted.  If the user presses Cancel or simply closes the
    * dialog, sets quizName to null.
    */
   public void propertyChange(PropertyChangeEvent event) {
      if (quizNameDialog.isVisible() && 
	  (event.getSource() == optionPane) && 
	  (event.getPropertyName().equals(JOptionPane.VALUE_PROPERTY))) {
	 Object value = optionPane.getValue();
	 
	 if (value == JOptionPane.UNINITIALIZED_VALUE) {
	    // Ignore reset
	    return;
	 }

	 // Reset the JOptionPane's value.  If we don't do this, then
	 // if the user presses the same button next time, no property
	 // change event will be fired.
	 optionPane.setValue(JOptionPane.UNINITIALIZED_VALUE);

	 // OK button was pressed
	 if (value.equals(JOptionPane.OK_OPTION)) {
	    quizName = quizName.trim();
	 }

	 // Cancel button was pressed, or the dialog was closed - set
	 // quizName to null
	 else {
	    quizName = null;
	    quizNameDialog.setVisible(false);
	 }
      }
   }
}
